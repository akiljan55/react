export default function(url) {
  const internal = {
    url
  };

  return {
    data: function (data) {
      internal.data = data;

      return this;
    },
    send: function () {
      setTimeout(function () {
        if (internal.data.username !== 'username') {
          internal.failure('Username does not exist');
        } else if (internal.data.password !== 'password') {
          internal.failure('Incorrect password');
        } else {
          internal.success('TOKEN');
        }
      }, 1000);

      return this;
    },
    then: function (success, failure) {
      internal.success = success;
      internal.failure = failure;

      return this;
    }
  };
}
